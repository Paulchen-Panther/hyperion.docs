import{_ as n,c as e,d as s,h as a}from"./app-CA0NuOq4.js";const t={},o=a(`<h1 id="authentifizierung" tabindex="-1"><a class="header-anchor" href="#authentifizierung"><span>Authentifizierung</span></a></h1><p>Hyperion verfügt über ein Authentifizierungssystem, das es Benutzern erlaubt, sich per Passwort anzumelden, und Anwendungen, sich mit Token zu authentifizieren. Der Benutzer kann konfigurieren, wie stark oder schwach die Hyperion-API im Bereich <code>Konfiguration -&gt; Netzwerkdienste</code> auf der Web-Benutzeroberfläche geschützt werden soll.</p><h3 id="token-system" tabindex="-1"><a class="header-anchor" href="#token-system"><span>Token-System</span></a></h3><p>Token sind eine einfache Möglichkeit, eine App für den API-Zugriff zu authentifizieren. Sie können erstellt werden in der Benutzeroberfläche im Bereich <code>Konfiguration -&gt; Netzwerkdienste</code> erstellt werden (der Bereich wird angezeigt, wenn die Option <code>API Authentifizierung</code> aktiviert ist. Deine Anwendung kann auch <a href="#token-anfordern">ein Token</a> über die API anfordern.</p><h3 id="authentifizierungsprufung" tabindex="-1"><a class="header-anchor" href="#authentifizierungsprufung"><span>Authentifizierungsprüfung</span></a></h3><p>Aufrufer können prüfen, ob eine Authentifizierung für die Arbeit mit der API erforderlich ist, indem sie folgendes senden:</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;authorize&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;subcommand&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;tokenRequired&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Wenn die Eigenschaft <code>required</code> true ist, ist eine Authentifizierung erforderlich. Eine Beispiel-Antwort:</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;authorize-tokenRequired&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;info&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;required&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;success&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tan&quot;</span> <span class="token operator">:</span><span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="anmeldung-mit-token" tabindex="-1"><a class="header-anchor" href="#anmeldung-mit-token"><span>Anmeldung mit Token</span></a></h3><p>Melde dich mit einem Token wie folgt an -- der Aufrufer erhält eine <a href="#login-antwort">Login-Antwort</a>.</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;authorize&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;subcommand&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;login&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;YourPrivateTokenHere&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="anmeldung-mit-token-uber-http-s" tabindex="-1"><a class="header-anchor" href="#anmeldung-mit-token-uber-http-s"><span>Anmeldung mit Token über HTTP/S</span></a></h3><p>Füge den HTTP-Autorisierungs-Header zu jeder Anfrage hinzu. Im Fehlerfall erhält der Benutzer eine fehlgeschlagene [Login-Antwort].(#login-antwort).</p><div class="language-http line-numbers-mode" data-ext="http" data-title="http"><pre class="language-http"><code>  Authorization : token YourPrivateTokenHere
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="login-antwort" tabindex="-1"><a class="header-anchor" href="#login-antwort"><span>Login-Antwort</span></a></h4><p>Eine erfolgreiche Anmeldeantwort:</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;authorize-login&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;success&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tan&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Eine fehlgeschlagene Anmeldeantwort:</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;authorize-login&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;error&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;No Authorization&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;success&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tan&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="abmelden" tabindex="-1"><a class="header-anchor" href="#abmelden"><span>Abmelden</span></a></h3><p>Benutzer können sich auch abmelden. Hyperion prüft den Anmeldestatus nicht, dieser Aufruf wird immer einen Erfolg zurück.</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;authorize&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;subcommand&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;logout&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Antwort:</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;authorize-logout&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;success&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;tan&quot;</span> <span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>Durch das Abmelden werden alle Streaming-Datendienste und Abonnements beendet</p></div><h3 id="token-anfordern" tabindex="-1"><a class="header-anchor" href="#token-anfordern"><span>Token anfordern</span></a></h3><p>Hier ist der empfohlene Workflow für deine Anwendung zur Authentifizierung:</p><ul><li>Beantrage bei Hyperion ein Token zusammen mit einer Beschreibung (eine kurze aussagekräftige Zeichenfolge, die den Aufrufer identifiziert, ist am sinnvollsten, z.B. mit einem Anwendungsnamen und Gerät) und eine kurze, zufällig erzeugte <code>id</code> (Zahlen/Buchstaben).</li><li>Warte auf die Antwort. Der Benutzer muss die Token-Anforderung über die Web-Benutzeroberfläche akzeptieren.</li><li>Bei Erfolg: Der Aufruf gibt ein UUID-Token zurück, das wiederholt verwendet werden kann. Beachte, dass der Zugriff vom Benutzer jederzeit widerrufen werden kann, aber die aktuelle Sitzung erhalten bleibt.</li><li>Bei Fehler: Der Aufruf erhält kein Token, was bedeutet, dass der Benutzer die Anfrage entweder abgelehnt hat oder die Zeit abgelaufen ist (180s).</li></ul><p>Fordere ein Token mit dem folgenden Befehl an und achte darauf, dass du einen Kommentar hinzufügst, der aussagekräftig genug ist, damit der Web-UI-Benutzer entscheiden kann, ob er die Anfrage genehmigt oder ablehnt. Das Feld <code>id</code> enthält 5 zufällige Zeichen, die vom Aufrufer erstellt werden und in der Web-Benutzeroberfläche erscheinen, wenn der Benutzer die Genehmigung erteilt.</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;authorize&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;subcommand&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;requestToken&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;comment&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;OpenHab 2 Binding&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;T3c91&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Nach dem Aufruf erscheint ein Popup in der Web-UI, um die Token-Anforderung zu akzeptieren/ablehnen. Die aufrufende Anwendung sollte den Kommentar und die ID anzeigen, damit der Benutzer die Herkunft in der Hyperion-Benutzeroberfläche ordnungsgemäß bestätigen kann. Nach 180 Sekunden ohne eine Benutzeraktion wird die Anfrage automatisch abgelehnt und der Aufrufer erhält eine Fehlerantwort (siehe unten).</p><h4 id="erfolgreiche-antwort" tabindex="-1"><a class="header-anchor" href="#erfolgreiche-antwort"><span>Erfolgreiche Antwort</span></a></h4><p>Wenn der Benutzer die Token-Anforderung akzeptiert hat, erhält der Aufrufer die folgende Antwort:</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;authorize-requestToken&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;success&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;info&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;comment&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;OpenHab2 Binding&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;T3c91&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;token&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;YourPrivateTokenHere&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Speichere das Token irgendwo zur weiteren Verwendung. Das Token läuft nicht ab.</li><li>Beachtet werden muss, dass ein Benutzer das Token widerrufen kann. Es funktioniert weiterhin für aktuell verbundene Sitzungen.</li></ul><h4 id="fehlgeschlagene-antwort" tabindex="-1"><a class="header-anchor" href="#fehlgeschlagene-antwort"><span>Fehlgeschlagene Antwort</span></a></h4><p>Eine Anfrage schlägt fehl, wenn entweder:</p><ul><li>Zeitüberschreitung (d. h. der Benutzer hat die Anfrage 180 Sekunden lang weder genehmigt noch abgelehnt).</li><li>Der Benutzer lehnt die Anfrage ab.</li></ul><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;authorize-requestToken&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;success&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;error&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Token request timeout or denied&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="abbruch-der-anforderung" tabindex="-1"><a class="header-anchor" href="#abbruch-der-anforderung"><span>Abbruch der Anforderung</span></a></h4><p>Die Token-Anforderung kann abgebrochen werden, indem man der ursprünglichen Anforderung eine &quot;accept&quot;-Eigenschaft hinzufügt. Die Anforderung wird gelöscht:</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;authorize&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;subcommand&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;requestToken&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;comment&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;OpenHab 2 Binding&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;T3c91&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;accept&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,43),i=[o];function r(p,u){return e(),s("div",null,i)}const d=n(t,[["render",r],["__file","Authentication.html.vue"]]),c=JSON.parse('{"path":"/de/json/Authentication.html","title":"Authentifizierung","lang":"de-DE","frontmatter":{},"headers":[{"level":3,"title":"Token-System","slug":"token-system","link":"#token-system","children":[]},{"level":3,"title":"Authentifizierungsprüfung","slug":"authentifizierungsprufung","link":"#authentifizierungsprufung","children":[]},{"level":3,"title":"Anmeldung mit Token","slug":"anmeldung-mit-token","link":"#anmeldung-mit-token","children":[]},{"level":3,"title":"Anmeldung mit Token über HTTP/S","slug":"anmeldung-mit-token-uber-http-s","link":"#anmeldung-mit-token-uber-http-s","children":[]},{"level":3,"title":"Abmelden","slug":"abmelden","link":"#abmelden","children":[]},{"level":3,"title":"Token anfordern","slug":"token-anfordern","link":"#token-anfordern","children":[]}],"git":{"updatedTime":1710708004000},"filePathRelative":"de/json/Authentication.md"}');export{d as comp,c as data};
